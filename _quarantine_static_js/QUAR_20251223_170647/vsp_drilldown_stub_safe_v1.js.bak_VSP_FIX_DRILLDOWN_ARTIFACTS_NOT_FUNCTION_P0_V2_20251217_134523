/* VSP_DRILLDOWN_STUB_SAFE_V1: guarantee drilldown symbol is a function */
(function(){
  'use strict';
  function stub(){
    try{ console.info("[VSP][DD] stub invoked"); }catch(_){}
    return { open:function(){}, show:function(){}, close:function(){}, destroy:function(){} };
  }
  try{
    // keep real impl if provided later
    if (typeof window.__vsp_dd_real !== "function") window.__vsp_dd_real = null;
    Object.defineProperty(window, "VSP_DASH_DRILLDOWN_ARTIFACTS_P1_V2", {
      configurable: false,
      enumerable: true,
      get: function(){ return (typeof window.__vsp_dd_real === "function") ? window.__vsp_dd_real : stub; },
      set: function(v){
        if (typeof v === "function") {
          window.__vsp_dd_real = v;
          try{ console.info("[VSP][DD] accepted real impl"); }catch(_){}
        } else {
          try{ console.warn("[VSP][DD] blocked overwrite (non-function)", v); }catch(_){}
        }
      }
    });
  }catch(e){
    // fallback if defineProperty fails
    if (typeof window.VSP_DASH_DRILLDOWN_ARTIFACTS_P1_V2 !== "function") {
      window.VSP_DASH_DRILLDOWN_ARTIFACTS_P1_V2 = stub;
    }
  }
})();
