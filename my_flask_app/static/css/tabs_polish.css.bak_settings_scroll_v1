/* =====================================================
   SECURITY_BUNDLE – Secondary tabs polish
   Áp dụng cho: Runs & Reports, Data Source, Settings, Rule Overrides
   Tông màu: dark navy + accent xanh/cyan thống nhất
   ===================================================== */

/* ---- Shared layout cho 4 tab phụ ---- */

#tab-runs,
#tab-data,
#tab-settings,
#tab-rules {
  padding: 24px 40px 40px;
  max-width: 100%;
  margin: 0 auto;
}

/* Tiêu đề section phía trên mỗi tab */

#tab-runs h2,
#tab-data h2,
#tab-settings h2,
#tab-rules h2 {
  font-size: 18px;
  font-weight: 600;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: #e6f0ff;
  margin: 0 0 6px;
}

#tab-runs p,
#tab-data p,
#tab-settings p,
#tab-rules p {
  margin: 0 0 18px;
  font-size: 13px;
  color: rgba(210, 224, 255, 0.72);
}

/* ---- Card / panel chung cho nội dung từng tab ---- */

.sb-tab-panel,
#tab-runs .sb-panel,
#tab-data .sb-panel,
#tab-settings .sb-panel,
#tab-rules .sb-panel {
  background:
    radial-gradient(circle at top left, rgba(31, 150, 243, 0.20), transparent 55%),
    rgba(3, 11, 30, 0.95);
  border-radius: 18px;
  border: 1px solid rgba(110, 150, 255, 0.25);
  box-shadow: 0 22px 55px rgba(0, 0, 0, 0.75);
  padding: 18px 22px;
}

#tab-runs .sb-panel + .sb-panel,
#tab-data .sb-panel + .sb-panel,
#tab-settings .sb-panel + .sb-panel,
#tab-rules .sb-panel + .sb-panel {
  margin-top: 18px;
}

/* Sub-title trong panel (ví dụ History, Files, Tools...) */

#tab-runs h3,
#tab-data h3,
#tab-settings h3,
#tab-rules h3 {
  font-size: 15px;
  font-weight: 500;
  color: #f0f6ff;
  margin: 0 0 10px;
}

/* ---- Bảng trong Runs, Data, Rules ---- */

#tab-runs table,
#tab-data table,
#tab-rules table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
  color: #dfe8ff;
}

#tab-runs thead th,
#tab-data thead th,
#tab-rules thead th {
  padding: 10px 14px;
  text-align: left;
  font-weight: 500;
  border-bottom: 1px solid rgba(120, 160, 255, 0.45);
  background: linear-gradient(135deg, rgba(18, 41, 94, 0.95), rgba(10, 24, 72, 0.95));
  color: #9fb8ff;
  white-space: nowrap;
}

#tab-runs tbody td,
#tab-data tbody td,
#tab-rules tbody td {
  padding: 8px 14px;
  border-bottom: 1px solid rgba(120, 160, 255, 0.10);
}

#tab-runs tbody tr:nth-child(even),
#tab-data tbody tr:nth-child(even),
#tab-rules tbody tr:nth-child(even) {
  background: rgba(5, 18, 54, 0.80);
}

#tab-runs tbody tr:nth-child(odd),
#tab-data tbody tr:nth-child(odd),
#tab-rules tbody tr:nth-child(odd) {
  background: rgba(3, 12, 40, 0.90);
}

#tab-runs tbody tr:hover,
#tab-data tbody tr:hover,
#tab-rules tbody tr:hover {
  background: rgba(35, 140, 255, 0.32);
}

/* Cột cuối của Runs (HTML / PDF) – hiển thị kiểu pill button */

#tab-runs table td:last-child a {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 600;
  text-decoration: none;
  background: linear-gradient(135deg, #38ef7d, #00c6ff);
  color: #021220;
  box-shadow: 0 0 0 1px rgba(6, 255, 180, 0.2);
}

#tab-runs table td:last-child a:hover {
  box-shadow: 0 0 0 1px rgba(6, 255, 180, 0.55), 0 0 20px rgba(0, 198, 255, 0.5);
  transform: translateY(-0.5px);
}

/* Căn cột số cho đẹp */

#tab-runs td:nth-child(5),
#tab-runs td:nth-child(6),
#tab-runs td:nth-child(7),
#tab-runs td:nth-child(8),
#tab-data td:nth-child(3),
#tab-data td:nth-child(4),
#tab-rules td:nth-child(3),
#tab-rules td:nth-child(4) {
  text-align: right;
}

/* ---- Data Source: danh sách file ---- */

#tab-data .file-table-description {
  font-size: 12px;
  color: rgba(210, 224, 255, 0.75);
}

#tab-data table td:first-child {
  font-weight: 500;
}

/* ---- Settings tab: hiển thị config gọn gàng ---- */

#tab-settings .settings-grid {
  display: grid;
  grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
  gap: 16px 24px;
  margin-top: 6px;
}

#tab-settings .settings-grid > div {
  background: rgba(3, 13, 40, 0.95);
  border-radius: 14px;
  border: 1px solid rgba(110, 150, 255, 0.28);
  padding: 14px 16px;
}

#tab-settings .settings-grid h4 {
  margin: 0 0 6px;
  font-size: 13px;
  font-weight: 600;
  color: #e1edff;
}

#tab-settings .settings-grid p {
  margin: 0;
  font-size: 12px;
  color: rgba(205, 220, 255, 0.78);
}

/* ---- Rules tab: bảng override ---- */

#tab-rules .rule-note {
  margin-bottom: 10px;
  font-size: 12px;
  color: rgba(210, 224, 255, 0.78);
}

#tab-rules table td:nth-child(2),
#tab-rules table td:nth-child(3),
#tab-rules table td:nth-child(4) {
  text-transform: uppercase;
  font-size: 11px;
}

/* Một chút spacing dưới để không bị dính mép trang */

#tab-runs::after,
#tab-data::after,
#tab-settings::after,
#tab-rules::after {
  content: "";
  display: block;
  height: 12px;
}

/* ==== Tool Run ON/OFF switch ==== */
.sb-switch {
  position: relative;
  display: inline-block;
  width: 44px;
  height: 22px;
}

.sb-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.sb-slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background-color: #1f2933;
  transition: .2s;
  border-radius: 999px;
}

.sb-slider:before {
  position: absolute;
  content: "";
  height: 16px;
  width: 16px;
  left: 3px;
  bottom: 3px;
  background-color: #9ca3af;
  transition: .2s;
  border-radius: 50%;
}

.sb-switch input:checked + .sb-slider {
  background-color: #0ea5e9;
}

.sb-switch input:checked + .sb-slider:before {
  transform: translateX(20px);
  background-color: #0b1120;
}

/* ===== Primary RUN button on Dashboard ===== */
.sb-run-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 22px;
  border-radius: 999px;
  border: none;
  font-weight: 600;
  font-size: 14px;
  background: linear-gradient(135deg, #06b6d4, #0ea5e9);
  color: #020617;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(15, 118, 200, 0.35);
  transition: transform 0.12s ease, box-shadow 0.12s ease, opacity 0.12s ease;
}

.sb-run-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 28px rgba(15, 118, 200, 0.45);
  opacity: 0.95;
}

.sb-run-btn:active {
  transform: translateY(0);
  box-shadow: 0 4px 14px rgba(15, 118, 200, 0.3);
}

.sb-run-btn-icon {
  font-size: 16px;
}


/* SB_RUNS_LAYOUT_V1
   Tối ưu tab Runs & Reports:
   - Card full-width
   - Bỏ scroll bên trong card, dùng scroll của trang
   - Bảng chiếm full width khung
*/

#tab-runs {
  padding: 32px 40px 48px;
  max-width: 100%;
  margin: 0 auto;
}

/* Card chính của Runs & Reports */
#tab-runs .card,
#tab-runs .sb-card,
#tab-runs .runs-card-main {
  width: 100%;
  margin: 0 auto;
  border-radius: 24px;
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55);
}

/* Bỏ scroll nội bộ – để card tự cao theo nội dung */
#tab-runs .table-wrapper,
#tab-runs .table-scroll,
#tab-runs .sb-table-scroll,
#tab-runs .table-responsive,
#tab-runs .runs-table-wrapper {
  max-height: none !important;
  height: auto !important;
  overflow-y: visible !important;
}

/* Bảng full width trong card */
#tab-runs table {
  width: 100%;
  border-collapse: collapse;
}

/* Đẹp hơn một chút cho header / cell */
#tab-runs table thead th {
  font-weight: 600;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

#tab-runs table tbody td {
  font-size: 13px;
  padding-top: 10px;
  padding-bottom: 10px;
}

/* Nút HTML / Report trong cột cuối gọn hơn */
#tab-runs .btn,
#tab-runs .badge,
#tab-runs .pill {
  border-radius: 999px;
  padding-left: 14px;
  padding-right: 14px;
}


/* SB_RUNS_LAYOUT_EXPORT_V2
   Tối ưu tab Runs & Reports:
   - Card full-width
   - Bỏ scroll bên trong card
   - Thêm thanh Export gọn trên đầu bảng
*/

#tab-runs {
  padding: 32px 40px 48px;
  max-width: 100%;
  margin: 0 auto;
}

#tab-runs .card,
#tab-runs .sb-card,
#tab-runs .runs-card-main {
  width: 100%;
  margin: 0 auto;
  border-radius: 24px;
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.50);
}

/* Bỏ scroll nội bộ – card tự cao, dùng scroll trang */
#tab-runs .table-wrapper,
#tab-runs .table-scroll,
#tab-runs .sb-table-scroll,
#tab-runs .table-responsive {
  max-height: none !important;
  height: auto !important;
  overflow-y: visible !important;
}

/* Bảng chiếm full width */
#tab-runs table {
  width: 100%;
  border-collapse: collapse;
}

/* Thanh export ở trên bảng */
#tab-runs .sb-runs-export-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

#tab-runs .sb-runs-export-title {
  font-size: 14px;
  opacity: 0.85;
}

#tab-runs .sb-runs-export-actions {
  display: flex;
  gap: 8px;
}

#tab-runs .sb-runs-export-actions button {
  font-size: 12px;
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid rgba(0, 198, 255, 0.5);
  background: rgba(0, 0, 0, 0.25);
  cursor: pointer;
  transition: background 0.15s ease, transform 0.05s ease;
}

#tab-runs .sb-runs-export-actions button:hover {
  background: rgba(0, 198, 255, 0.2);
  transform: translateY(-1px);
}

/* ==== OVERRIDE: Runs & Reports full-width ==== */

/* Tăng padding tab Runs một chút cho cân với Dashboard */
#tab-runs {
  padding: 32px 40px 40px;
}

/* Bất kỳ card / box nào bên trong tab-runs đều full width trong container */
#tab-runs .card,
#tab-runs .sb-card,
#tab-runs .runs-card,
#tab-runs .recent-runs-wrapper,
#tab-runs .history-card {
  width: 100% !important;
  max-width: 1320px !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Nếu có container bao ngoài (div duy nhất bọc cái card) thì cho nó full luôn */
#tab-runs > div,
#tab-runs > section {
  max-width: 100%;
  margin: 0 auto;
}

/* Bỏ cảm giác “khung nhỏ” bằng cách giảm shadow + bo nhẹ hơn 1 chút (nhìn rộng hơn) */
#tab-runs .card {
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.65);
}

/* Cho bản thân bảng chiếm chiều cao nhiều hơn mà không tạo scroll đứng khó chịu */
#tab-runs .table-responsive,
#tab-runs .recent-runs-table-wrapper {
  max-height: 420px;
  overflow-y: auto;
}

/* ===============================
 * VSP DASHBOARD – COMPACT 1080p
 * Thu nhỏ toàn bộ TAB 1 để fit 1 màn,
 * bỏ cuộn dọc ở màn chính.
 * =============================== */
@media (min-width: 1360px) and (max-height: 1080px) {
  /* Không cho body cuộn dọc khi đang ở VSP UI */
  body {
    overflow-y: hidden;
  }

  /* Thu nhỏ toàn bộ Tab Dashboard */
  #tab-dashboard {
    transform: scale(0.80);          /* cần nhỏ hơn nữa thì chỉnh 0.75–0.78 */
    transform-origin: top center;
    height: calc(100vh - 120px);     /* trừ phần header trên cùng */
    overflow: hidden;
    padding-bottom: 0;
    margin-bottom: 0;
  }

  /* Giảm padding chung trong dashboard để đỡ tốn chiều cao */
  #tab-dashboard .card,
  #tab-dashboard .vsp-card,
  #tab-dashboard [class*="card-"] {
    padding-top: 14px;
    padding-bottom: 14px;
  }

  /* Giảm gap giữa các khối trong lưới dashboard (nếu có class grid) */
  #tab-dashboard .vsp-dashboard-grid,
  #tab-dashboard .dashboard-grid,
  #tab-dashboard .row,
  #tab-dashboard .grid {
    row-gap: 16px;
  }

  /* Nếu có ô Compliance / text dài ở góc dưới phải: cắt bớt chiều cao */
  #tab-dashboard .compliance-card,
  #tab-dashboard .compliance-text,
  #tab-dashboard [data-block="compliance"] {
    max-height: 140px;
    overflow: hidden;
  }

  /* Tắt scrollbar bên trong các bảng/top-risk nếu có */
  #tab-dashboard .scroll-y,
  #tab-dashboard [style*="overflow-y: scroll"],
  #tab-dashboard [style*="overflow-y: auto"] {
    overflow-y: hidden !important;
  }
}

/* ---- VSP Dashboard auto-scale override (v2) ---- */
#tab-dashboard {
  transform: none;
  transform-origin: top center;
}

/* ==== OVERRIDE: VSP Dashboard không bị cắt chiều cao ==== */
@media (min-width: 1360px) and (max-height: 1080px) {
  #tab-dashboard {
    height: auto !important;
    overflow: visible !important;
  }
}

/* ===================================================================
 * VSP DASHBOARD – FULLSCREEN 1080p FIX (NO VERTICAL SCROLL, NO GAPS)
 * Áp dụng cho route /security_bundle (TAB 1 – Dashboard)
 * =================================================================== */

/* Toàn bộ tab Dashboard chiếm đúng 1 viewport, không cuộn dọc */
#tab-dashboard {
  width: 100vw;
  height: 100vh;
  margin: 0 !important;
  padding: 0 !important;
  overflow: hidden !important;
  display: flex;
  flex-direction: column;
}

/* Wrapper chính của dashboard – bỏ margin/padding dư, fit full màn */
#tab-dashboard .vsp-dashboard-wrapper,
#tab-dashboard .vsp-dashboard-container,
#tab-dashboard .vsp-dashboard-root {
  width: 100%;
  height: 100%;
  margin: 0 !important;
  padding: 8px 18px 18px 18px !important;
  box-sizing: border-box;
  overflow: hidden !important;
}

/* Thu nhỏ nhẹ toàn bộ dashboard để vừa trọn 1080p (tránh phải cuộn) */
#tab-dashboard .vsp-dashboard-wrapper,
#tab-dashboard .vsp-dashboard-container,
#tab-dashboard .vsp-dashboard-root {
  transform: scale(0.92);
  transform-origin: top center;
}

/* Nền ngoài không cho xuất hiện scroll */
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden !important;
}

/* Các zone chính trong dashboard – bỏ khoảng trống thừa */
#tab-dashboard .vsp-kpi-zone,
#tab-dashboard .vsp-chart-zone,
#tab-dashboard .vsp-bottom-zone {
  margin: 0 !important;
  padding: 0 !important;
}

/* Card / chart / bảng – giảm padding để tiết kiệm chiều cao */
#tab-dashboard .vsp-card,
#tab-dashboard .vsp-chart,
#tab-dashboard .vsp-table-box {
  padding: 8px 10px !important;
  margin: 0 !important;
}

/* Tiêu đề section gọn lại, tránh chiếm nhiều chiều cao */
#tab-dashboard .vsp-section-title {
  margin: 0 0 4px 0 !important;
  padding: 0 !important;
}

/* Ẩn thanh scroll con nếu còn */
#tab-dashboard * {
  scrollbar-width: none;
}

/* ============================================================
 * VSP DASHBOARD – FULLSCREEN FIX V2 (NO GAP, NO SCALE)
 * Áp dụng cho /security_bundle – TAB 1 Dashboard
 * ============================================================ */

/* Toàn bộ tab Dashboard: full viewport, không cuộn dọc */
#tab-dashboard {
  width: 100vw;
  height: 100vh;
  margin: 0 !important;
  padding: 0 !important;
  display: flex;
  flex-direction: column;
  overflow: hidden !important;
}

/* Bỏ mọi transform scale cũ nếu có */
#tab-dashboard .vsp-dashboard-wrapper,
#tab-dashboard .vsp-dashboard-container,
#tab-dashboard .vsp-dashboard-root {
  transform: none !important;
}

/* Child đầu tiên (thường là wrapper chính) chiếm hết chiều cao còn lại */
#tab-dashboard > div:first-of-type,
#tab-dashboard > section:first-of-type {
  flex: 1 1 auto;
  height: 100%;
  margin: 0 !important;
  padding: 8px 18px 18px 18px !important;
  box-sizing: border-box;
  overflow: hidden !important;
}

/* Các child khác (nếu có) chỉ cao vừa nội dung */
#tab-dashboard > *:not(:first-of-type) {
  flex: 0 0 auto;
}

/* Giảm khoảng trống trong Dashboard */
#tab-dashboard .vsp-kpi-zone,
#tab-dashboard .vsp-chart-zone,
#tab-dashboard .vsp-bottom-zone {
  margin: 0 !important;
  padding: 0 !important;
}

/* Card / chart / bảng – tối ưu padding cho gọn chiều cao */
#tab-dashboard .vsp-card,
#tab-dashboard .vsp-chart,
#tab-dashboard .vsp-table-box {
  padding: 8px 10px !important;
  margin: 0 !important;
}

/* Tiêu đề section gọn lại */
#tab-dashboard .vsp-section-title {
  margin: 0 0 4px 0 !important;
  padding: 0 !important;
}

/* Không cho xuất hiện thanh cuộn toàn trang */
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden !important;
}

/* Ẩn scrollbar con nếu còn */
#tab-dashboard * {
  scrollbar-width: none;
}

/* ===== VersaSecure sidebar brand & main menu colors ===== */

/* Card logo VersaSecure Platform */
.vsp-sidebar-brand,
.sidebar-brand-card,
#vsp-sidebar-brand {
  background: radial-gradient(circle at 0% 0%, #16a34a 0, #052e16 55%, #020617 100%);
  border-radius: 999px;
  border: 1px solid rgba(74, 222, 128, 0.55);
  box-shadow: 0 0 18px rgba(34, 197, 94, 0.45);
}

/* Badge "V" trong logo nếu có */
.vsp-sidebar-brand .brand-badge,
.sidebar-brand-card .brand-badge {
  background: #22c55e;
  box-shadow: 0 0 18px rgba(34, 197, 94, 0.8);
}

/* --- MAIN MENU --- */

/* Item đang active (Dashboard / tab hiện tại) */
.sidebar-main .nav-item.active > a,
.sidebar-main .nav-item.active > button,
.nav-main .nav-item.active > a,
.nav-main .nav-item.active > button,
.nav-main li.active > a,
.nav-main li.active > button {
  background: #22c55e !important;          /* lime brand */
  color: #0f172a !important;               /* text đậm cho dễ đọc */
  box-shadow: 0 0 18px rgba(34, 197, 94, 0.85);
}

/* Chấm tròn bên trái item active (nếu có class .nav-dot) */
.nav-main li.active .nav-dot,
.sidebar-main .nav-item.active .nav-dot {
  background: #052e16 !important;
}

/* Item chưa active – giữ màu xám nhưng rõ hơn chút */
.sidebar-main .nav-item > a,
.sidebar-main .nav-item > button,
.nav-main li > a,
.nav-main li > button {
  color: #e5e7eb;
}

.sidebar-main .nav-item > a:hover,
.sidebar-main .nav-item > button:hover,
.nav-main li > a:hover,
.nav-main li > button:hover {
  color: #f9fafb;
}

/* ===== FORCE brand màu cho item active trong sidebar ===== */
/* Áp dụng cho mọi li.active > a / button trên trang */
li.active > a,
li.active > button,
.nav-item.active > a,
.nav-item.active > button {
  background: #22c55e !important;          /* xanh lá brand */
  color: #0f172a !important;               /* chữ sẫm cho dễ đọc */
  border-radius: 999px !important;
  box-shadow: 0 0 18px rgba(34, 197, 94, 0.75) !important;
}

/* Text của menu chưa active */
li > a,
li > button {
  color: #e5e7eb;
}
li > a:hover,
li > button:hover {
  color: #f9fafb;
}

/* ==== Sidebar MAIN: dùng tông navy thay vì xanh lá ==== */

/* Item đang active (Dashboard / Runs & Reports / ...) */
li.active > a,
li.active > button,
.nav-item.active > a,
.nav-item.active > button {
  background: #111827 !important;           /* navy đậm, gần màu nền */
  color: #e5e7eb !important;                /* chữ xám sáng */
  border-radius: 999px !important;
  border: 1px solid rgba(148, 163, 184, 0.6) !important;  /* viền xám nhạt */
  box-shadow: 0 0 12px rgba(15, 23, 42, 0.8) !important;  /* glow rất nhẹ, cùng tông */
}

/* Item chưa active: xám nhạt, hover sáng hơn 1 chút */
li > a,
li > button {
  color: #9ca3af;
}
li > a:hover,
li > button:hover {
  color: #e5e7eb;
}

/* ==== FORCE sidebar menu dùng tông NAVY cho item active ==== */

/* Các nút / link có class active trong khu menu chính */
.nav-main a.active,
.nav-main button.active,
.sidebar-main a.active,
.sidebar-main button.active,
.sidebar a.active,
.sidebar button.active {
  background: #111827 !important;              /* navy đậm */
  background-image: none !important;
  color: #e5e7eb !important;                   /* chữ xám sáng */
  border-radius: 999px !important;
  border: 1px solid rgba(148, 163, 184, 0.6) !important;
  box-shadow: 0 0 12px rgba(15, 23, 42, 0.9) !important;
}

/* Phòng trường hợp màu xanh lá đang set ở đây */
.nav-main a.active,
.nav-main button.active {
  text-shadow: none !important;
}

/* Màu item chưa active: xám, hover sáng hơn chút */
.nav-main a,
.nav-main button,
.sidebar-main a,
.sidebar-main button {
  color: #9ca3af;
}
.nav-main a:hover,
.nav-main button:hover,
.sidebar-main a:hover,
.sidebar-main button:hover {
  color: #e5e7eb;
}
