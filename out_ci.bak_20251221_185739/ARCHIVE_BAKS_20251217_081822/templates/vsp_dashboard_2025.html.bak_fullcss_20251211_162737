<!DOCTYPE html>
<html lang="vi">
<head>
  <!-- Console patch & logic 5 tab -->
  <script src="/static/js/vsp_console_patch_v1.js?v=20251217_071709" defer></script>

  <meta charset="UTF-8">
  <title>VersaSecure Platform ‚Äì VSP 2025</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Font Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Theme ch√≠nh 2025 -->
  <link rel="stylesheet" href="/static/css/vsp_theme_2025.css">
</head>
<body class="vsp-body">
  <div class="vsp-shell">
    <!-- SIDEBAR -->
    <aside class="vsp-sidebar">
      <div class="vsp-sidebar__brand">
        <div class="vsp-logo">VSP</div>
        <div class="vsp-brand-meta">
          <div class="vsp-brand-title">VersaSecure Platform</div>
          <div class="vsp-brand-sub">Security Posture 2025</div>
        </div>
      </div>

      <div class="vsp-env-pill">
        <span class="vsp-env-label">ENV</span>
        <span class="vsp-env-value" id="vsp-env-name">STAGING ¬∑ FULL_EXT</span>
      </div>

      <nav class="vsp-nav">
        <button class="vsp-nav-item is-active" data-vsp-tab="#vsp-tab-dashboard">
          <span class="vsp-nav-icon">üìä</span>
          <span>Dashboard</span>
        </button>
        <button class="vsp-nav-item" data-vsp-tab="#vsp-tab-runs">
          <span class="vsp-nav-icon">üìÅ</span>
          <span>Runs &amp; Reports</span>
        </button>
        <button class="vsp-nav-item" data-vsp-tab="#vsp-tab-datasource">
          <span class="vsp-nav-icon">üß¨</span>
          <span>Data Source</span>
        </button>
        <button class="vsp-nav-item" data-vsp-tab="#vsp-tab-settings">
          <span class="vsp-nav-icon">‚öôÔ∏è</span>
          <span>Settings</span>
        </button>
        <button class="vsp-nav-item" data-vsp-tab="#vsp-tab-rules">
          <span class="vsp-nav-icon">üß©</span>
          <span>Rule Overrides</span>
        </button>
      </nav>

      <div class="vsp-sidebar__footer">
        <div class="vsp-version-pill">
          <span>VSP 2025</span>
          <span class="vsp-version-dot"></span>
          <span id="vsp-build-label">FULL_EXT</span>
        </div>
        <div class="vsp-small-meta">
          BE: 8961 ¬∑ UI: 8910
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="vsp-main">
      <!-- HEADER -->
      <header class="vsp-header">
        <div class="vsp-header-left">
          <h1 class="vsp-header-title">Security Posture Overview</h1>
          <p class="vsp-header-sub">
            CIO-level view ¬∑ auto refresh from <code>/api/vsp/dashboard_v3</code>
          </p>
        </div>
        <div class="vsp-header-right">
          <div class="vsp-header-kpi">
            <div class="vsp-header-kpi-label">Total Findings</div>
            <div class="vsp-header-kpi-value" id="vsp-header-total-findings">‚Äì</div>
          </div>
          <div class="vsp-header-kpi">
            <div class="vsp-header-kpi-label">Score</div>
            <div class="vsp-header-kpi-value" id="vsp-header-score">‚Äì</div>
          </div>
          <div class="vsp-header-meta">
            <div class="vsp-chip" id="vsp-latest-run-id">RUN: ‚Äì</div>
            <div class="vsp-chip vsp-chip--soft" id="vsp-latest-run-type">FULL_EXT</div>
          </div>
        </div>
      </header>

      <!-- TABS WRAPPER: 5 pane t∆∞∆°ng ·ª©ng 5 tab -->
      <section class="vsp-tabs">
        <!-- TAB 1: DASHBOARD -->
        <div id="vsp-tab-dashboard" class="vsp-tab-pane is-active">
          <!-- KPI ZONE -->
          <section class="vsp-section">
            <div class="vsp-section-header">
              <h2>KPI Zone</h2>
              <p>6 severity bucket + 4 advanced KPI</p>
            </div>
            <div id="vsp-dashboard-kpi-root" class="vsp-kpi-grid">
              <!-- vsp_dashboard_kpi_v1.js s·∫Ω fill n·ªôi dung -->
            </div>
          </section>

          <!-- CHART ZONE -->
          <section class="vsp-section">
            <div class="vsp-section-header">
              <h2>Charts</h2>
              <p>Severity, trend, tool risk, top CWE</p>
            </div>
            <div id="vsp-dashboard-charts-root" class="vsp-charts-grid">
              <!-- vsp_dashboard_charts_v1.js s·∫Ω render chart -->
            </div>
          </section>

          <!-- FINDINGS ZONE -->
          <section class="vsp-section vsp-section--last">
            <div class="vsp-section-header">
              <h2>Findings Snapshot</h2>
              <p>Sample from Data Source for quick triage</p>
            </div>
            <div id="vsp-dashboard-findings-root" class="vsp-panel">
              <!-- C√≥ th·ªÉ d√πng mini-table / top risky items -->
            </div>
          </section>
        </div>

        <!-- TAB 2: RUNS & REPORTS -->
        <div id="vsp-tab-runs" class="vsp-tab-pane">
          <section class="vsp-section">
            <div class="vsp-section-header vsp-section-header--row">
              <div>
                <h2>Runs &amp; Reports</h2>
                <p>L·ªãch s·ª≠ FULL_EXT, CI, DEV test ¬∑ ngu·ªìn /api/vsp/runs_index_v3</p>
              </div>
              <div class="vsp-toolbar">
                <button id="vsp-btn-run-full-ext" class="vsp-btn vsp-btn--primary">
                  Run FULL_EXT
                </button>
                <button id="vsp-btn-run-ci" class="vsp-btn vsp-btn--ghost">
                  Trigger CI Gate
                </button>
                <button id="vsp-btn-export-runs" class="vsp-btn vsp-btn--ghost">
                  Export HTML / ZIP
                </button>
              </div>
            </div>

            <!-- Mini KPI cho Runs (vs. console patch inject) -->
            <div id="vsp-runs-kpi-root" class="vsp-mini-kpi-row">
              <!-- vsp_runs_tab_kpi_inject_v1.js -->
            </div>

            <!-- B·∫£ng Runs ch√≠nh -->
            <div class="vsp-table-wrapper">
              <table id="vsp-runs-table" class="vsp-table">
                <thead>
                  <tr>
                    <th>Run ID</th>
                    <th>Type</th>
                    <th>Total Findings</th>
                    <th>Critical / High</th>
                    <th>Started At</th>
                    <th>Duration</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- vsp_runs_v1/v2.js s·∫Ω fill -->
                </tbody>
              </table>
            </div>

            <!-- Chi ti·∫øt run -->
            <div id="vsp-run-detail-root" class="vsp-panel vsp-panel--subtle">
              <!-- chi ti·∫øt 1 run khi click -->
            </div>
          </section>
        </div>

        <!-- TAB 3: DATA SOURCE -->
        <div id="vsp-tab-datasource" class="vsp-tab-pane">
          <section class="vsp-section">
            <div class="vsp-section-header vsp-section-header--row">
              <div>
                <h2>Unified Data Source</h2>
                <p>findings_unified.json ¬∑ /api/vsp/datasource_v2</p>
              </div>
              <div class="vsp-toolbar">
                <button id="vsp-btn-ds-export-csv" class="vsp-btn vsp-btn--ghost">
                  Export CSV
                </button>
                <button id="vsp-btn-ds-export-json" class="vsp-btn vsp-btn--ghost">
                  Export JSON
                </button>
              </div>
            </div>

            <!-- Thanh filter & mini analytics -->
            <div class="vsp-ds-layout">
              <div class="vsp-ds-left">
                <div id="vsp-ds-filter-bar" class="vsp-filter-bar">
                  <!-- vsp_datasource_ext_columns_v1.js c√≥ th·ªÉ g·∫Øn filter -->
                </div>
                <div class="vsp-table-wrapper vsp-table-wrapper--dense">
                  <table id="vsp-ds-table" class="vsp-table vsp-table--compact">
                    <thead>
                      <tr>
                        <th>Severity</th>
                        <th>Tool</th>
                        <th>Rule</th>
                        <th>CWE</th>
                        <th>Location</th>
                        <th>Message</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- /api/vsp/datasource_v2 s·∫Ω fill -->
                    </tbody>
                  </table>
                </div>
              </div>
              <aside class="vsp-ds-right">
                <div id="vsp-ds-analytics-root" class="vsp-panel">
                  <!-- mini analytics: by tool, by CWE -->
                </div>
              </aside>
            </div>
          </section>
        </div>

        <!-- TAB 4: SETTINGS -->
        <div id="vsp-tab-settings" class="vsp-tab-pane">
          <section class="vsp-section">
            <div class="vsp-section-header">
              <h2>Settings</h2>
              <p>Config cho SECURITY_BUNDLE ¬∑ /api/vsp/settings_ui_v1</p>
            </div>

            <div id="vsp-settings-root" class="vsp-settings-grid">
              <!-- vsp_settings_tab_v1.js s·∫Ω d·ª±ng form t·ª´ JSON -->
            </div>
          </section>
        </div>

        <!-- TAB 5: RULE OVERRIDES -->
        <div id="vsp-tab-rules" class="vsp-tab-pane">
          <section class="vsp-section">
            <div class="vsp-section-header">
              <h2>Rule Overrides</h2>
              <p>Cho ph√©p mute / downgrade rule theo context ¬∑ /api/vsp/rule_overrides_ui_v1</p>
            </div>

            <div id="vsp-rules-root" class="vsp-rules-layout">
              <div class="vsp-panel">
                <h3 class="vsp-panel-title">Active Overrides</h3>
                <div id="vsp-rules-list">
                  <!-- danh s√°ch override -->
                </div>
              </div>
              <div class="vsp-panel vsp-panel--subtle">
                <h3 class="vsp-panel-title">Policy &amp; Workflow</h3>
                <p>
                  Quy ∆∞·ªõc: m·ªçi override ƒë·ªÅu ph·∫£i trace ƒë∆∞·ª£c v·ªÅ ticket / quy·∫øt ƒë·ªãnh c·ªßa
                  Security Board. File g·ªëc: <code>vsp_rule_overrides_v1.json</code>.
                </p>
              </div>
            </div>
          </section>
        </div>
      </section>
    </main>
  </div>
</body>
</html>
